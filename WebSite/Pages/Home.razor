@page "/"
@using WebSite.Components;

@if (_memory is not null)
{
    <MemoryView MemoryObject="@_memory" @ref="_memoryView" />
}

<div class="row align-items-start mb-3">
    <div class="col">
        @if (_cpu is not null)
        {
            <div class="mb-4">
                <CPUView CPUObject="@_cpu" />
            </div>
            <div class="mb-2">
                <button class="btn btn-primary me-2" @onclick="Step">Step</button>
                <button class="btn btn-secondary me-2" @onclick="() => InitialiseToMemorySize(_memorySize)">Initialise</button>
                <input type="number"
                       class="form-control d-inline-block"
                       style="width: 100px;"
                       min="0"
                       max="4096"
                       value="@_memorySize"
                       @onchange="(e) => _memorySize = int.Parse(e.Value.ToString())"
                       />
            </div>
        }
    </div>
    <div class="col-auto">
        <span id="message" class="d-block"><pre>@Message</pre></span>
    </div>
</div>

<StoredPrograms OnLoadProgram="StoredPrograms_OnLoad" MainMemory="@_memory" />